<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Map &mdash; Targetscope API</title>
    
    <link rel="stylesheet" href="../_static/better.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'v1.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Targetscope API" href="../index.html" />
    <link rel="up" title="Operations" href="index.html" />
    <link rel="next" title="Glossary" href="../glossary.html" />
    <link rel="prev" title="Interaction" href="interaction.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../_static/custom_style.css" type="text/css" />
  </head>
  <body role="document">
    <header id="pageheader"><h1><a href="../index.html ">
        Targetscope API
    </a></h1></header>
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="interaction.html" title="Previous document">Interaction</a>
        </li>
        <li>
          <a href="../glossary.html" title="Next document">Glossary</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Home</a></li>
      <li>
        <a href="index.html">Operations</a>
      </li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="map">
<span id="ops-map"></span><h1>Map<a class="headerlink" href="#map" title="Permalink to this headline">¶</a></h1>
<div class="section" id="element-set-onto-element-set">
<span id="ops-map-element-onto-element"></span><h2>Element set onto element set<a class="headerlink" href="#element-set-onto-element-set" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>Input</strong></dt>
<dd>1 or 2 <a class="reference internal" href="../data/compound.html#compound-element"><em>Element</em></a> <a class="reference internal" href="../data/compound.html#compound-set"><em>Sets</em></a>; overlap criteria (integer/bases or float/percentage); report operator(s)</dd>
<dt><strong>Output</strong></dt>
<dd><a class="reference internal" href="../data/compound.html#compound-element"><em>Element</em></a> <a class="reference internal" href="../data/compound.html#compound-set"><em>Sets</em></a></dd>
<dt><strong>CLI example</strong></dt>
<dd><code class="docutils literal"><span class="pre">bedmap</span> <span class="pre">--echo</span> <span class="pre">--echo-map</span> <span class="pre">--bp-ovr</span> <span class="pre">1</span> <span class="pre">ref.bed</span> <span class="pre">map.bed</span> <span class="pre">&gt;</span> <span class="pre">ref_with_mapped_map.bed</span></code></dd>
</dl>
<p>This operation maps elements in one &#8220;map&#8221; <a class="reference internal" href="../data/compound.html#compound-set"><em>set</em></a> to <a class="reference internal" href="../data/compound.html#compound-element"><em>elements</em></a> in another &#8220;reference&#8221; set, if mapped elements meet the specified overlap criteria.</p>
<p>For instance, take the following command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ bedmap --echo --echo-map --bp-ovr 1 ref.bed map.bed &gt; ref_with_mapped_map.bed
</pre></div>
</div>
<p>This command associates elements in the file <code class="docutils literal"><span class="pre">map.bed</span></code> with each element in <code class="docutils literal"><span class="pre">ref.bed</span></code>, where each map element overlaps a reference element by one or more bases. The <code class="docutils literal"><span class="pre">--echo-map</span></code> operation reports all map elements that associate with a reference element.</p>
<p>The result of this most basic mapping example is a set of reference elements, where each reference element has another element set associated with it:</p>
<a class="reference internal image-reference" href="../_images/ops_map_element_onto_element.png"><img alt="../_images/ops_map_element_onto_element.png" src="../_images/ops_map_element_onto_element.png" style="width: 50%;" /></a>
<p>Some reference elements may associate with map sets with elements. Other reference elements may associate with an empty set, if the overlap criteria means that there are no overlapping (no mappable) elements.</p>
<p>In this example, we report the reference set elements along with all mapped elements. However, we may use operators to only report mapped elements:</p>
<div class="highlight-python"><div class="highlight"><pre>$ bedmap --echo-map --bp-ovr 1 ref.bed map.bed | sort-bed - &gt; mapped_map.bed
</pre></div>
</div>
<p>Alternative arguments to <code class="docutils literal"><span class="pre">bedmap</span></code> may summarize or &#8220;report&#8221; attributes about mapped elements. Discussion of these follow.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The default overlap criteria that is used by <code class="docutils literal"><span class="pre">bedmap</span></code> is one or more bases.</p>
</div>
</div>
<div class="section" id="element-set-onto-interaction-set">
<span id="ops-map-element-onto-interaction"></span><h2>Element set onto interaction set<a class="headerlink" href="#element-set-onto-interaction-set" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>Input</strong></dt>
<dd>1 <a class="reference internal" href="../data/compound.html#compound-element"><em>Element</em></a> <a class="reference internal" href="../data/compound.html#compound-set"><em>Set</em></a>; 1 <a class="reference internal" href="../data/compound.html#compound-interaction"><em>Interaction</em></a> <a class="reference internal" href="../data/compound.html#compound-set"><em>Set</em></a>; index of desired interaction component to act as reference set; overlap criteria (integer/bases or float/percentage); report operator(s)</dd>
<dt><strong>Output</strong></dt>
<dd><a class="reference internal" href="../data/compound.html#compound-interaction"><em>Interaction</em></a> <a class="reference internal" href="../data/compound.html#compound-set"><em>Set</em></a></dd>
</dl>
<p>This is identical to mapping an <a class="reference internal" href="../data/compound.html#compound-element"><em>Element</em></a> <a class="reference internal" href="../data/compound.html#compound-set"><em>Set</em></a> against another element set, with the same default overlap criteria, except that we specify which of the two components of the <a class="reference internal" href="../data/compound.html#compound-interaction"><em>Interaction</em></a> we would like to treat as the reference set to map our input element set against.</p>
<p>For instance, let&#8217;s say we want a list of <a class="reference internal" href="../data/compound.html#compound-interaction"><em>Interactions</em></a>, whose promoter components overlap with some genes of interest.</p>
<p>We start with an <a class="reference internal" href="../data/compound.html#compound-interaction"><em>Interaction</em></a> <a class="reference internal" href="../data/compound.html#compound-set"><em>Set</em></a> that pairs promoter components with DHS peak components. For this example, the index of the promoter component in this set is <code class="docutils literal"><span class="pre">0</span></code> and the index of the DHS peak component is <code class="docutils literal"><span class="pre">1</span></code>.</p>
<p>We also start with an element set of transcription start sites (TSSs) for target genes. These contain genomic <a class="reference internal" href="../data/base.html#base-range"><em>Ranges</em></a> and gene <a class="reference internal" href="../data/base.html#base-name"><em>Names</em></a>.</p>
<p>For this map operation, we specify an index of <code class="docutils literal"><span class="pre">0</span></code> to retrieve the set of interactions whose promoter components&#8217; ranges are overlapped by the TSS ranges.</p>
</div>
<div class="section" id="summary-report">
<span id="ops-map-summary"></span><h2>Summary report<a class="headerlink" href="#summary-report" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>Input</strong></dt>
<dd>1 <a class="reference internal" href="../data/compound.html#compound-element"><em>Element</em></a> <a class="reference internal" href="../data/compound.html#compound-set"><em>Set</em></a>; summary operator</dd>
<dt><strong>Output</strong></dt>
<dd><a class="reference internal" href="../data/compound.html#compound-set"><em>Set</em></a>, <a class="reference internal" href="../data/compound.html#compound-array"><em>Array</em></a> or <a class="reference internal" href="../data/base.html#base"><em>base type</em></a></dd>
<dt><strong>CLI example</strong></dt>
<dd><code class="docutils literal"><span class="pre">bedmap</span> <span class="pre">--mean</span> <span class="pre">--bp-ovr</span> <span class="pre">1</span> <span class="pre">ref.bed</span> <span class="pre">map.bed</span> <span class="pre">&gt;</span> <span class="pre">mean_map_signal_over_refs.bed</span></code></dd>
</dl>
<p>This operation summarizes attributes of an <a class="reference internal" href="../data/compound.html#compound-element"><em>Element</em></a> <a class="reference internal" href="../data/compound.html#compound-set"><em>Set</em></a>. This summary could be the result of a numerical calculation on <a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a> data, or a listing of <a class="reference internal" href="../data/base.html#base-name"><em>Name</em></a> values.</p>
<p><em>Examples:</em></p>
<ul class="simple">
<li>For all the mappable elements that associate with a reference element, we may want a <a class="reference internal" href="../data/compound.html#compound-set"><em>Set</em></a> of names of those mapped elements, leaving out duplicates.</li>
<li>For all the mappable elements that associate with a reference element, we want the arithmetic mean and variance of the signal or a <a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a> value derived from mapped elements.</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="18%" />
<col width="36%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operation</th>
<th class="head">Argument</th>
<th class="head">Description</th>
<th class="head">Output</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>bases</td>
<td>NA</td>
<td>Report the total number of bases in
the <a class="reference internal" href="../data/base.html#base-range"><em>Ranges</em></a> in the
input set</td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
<tr class="row-odd"><td>bases-uniq</td>
<td>NA</td>
<td>Report the unique (non-overlapping)
number of bases in the <a class="reference internal" href="../data/base.html#base-range"><em>Ranges</em></a> in the input set</td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
<tr class="row-even"><td>count</td>
<td>NA</td>
<td>Report the number of <a class="reference internal" href="../data/compound.html#compound-element"><em>Elements</em></a> in the input set</td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
<tr class="row-odd"><td>cv</td>
<td>NA</td>
<td>Report the coefficient of variation:
the standard deviation of <a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a> values in the input set
divided by their mean</td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
<tr class="row-even"><td><em>k</em> th</td>
<td><em>i</em></td>
<td>Report the value at the <em>k</em> th
fraction of <a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a>
values, where <em>i</em> = 0.5 reports the
median (0 &lt; <em>i</em> &lt;= 1)</td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
<tr class="row-odd"><td>mad</td>
<td><em>mult</em></td>
<td>Report the median absolute deviation
of <a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a> values,
multiplied by <em>mult</em></td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
<tr class="row-even"><td>max</td>
<td>NA</td>
<td>Report highest <a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a> in input set</td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
<tr class="row-odd"><td>max-element</td>
<td>NA</td>
<td>Report highest-scoring <a class="reference internal" href="../data/compound.html#compound-element"><em>Element</em></a> in input set
(ties go to random element)</td>
<td><a class="reference internal" href="../data/compound.html#compound-set"><em>Set</em></a></td>
</tr>
<tr class="row-even"><td>mean</td>
<td>NA</td>
<td>Report arithmetic mean of <a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a> values in input set</td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
<tr class="row-odd"><td>median</td>
<td>NA</td>
<td>Report median <a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a> value from input set</td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
<tr class="row-even"><td>min</td>
<td>NA</td>
<td>Report lowest <a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a> value from input set</td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
<tr class="row-odd"><td>min-element</td>
<td>NA</td>
<td>Report lowest-scoring <a class="reference internal" href="../data/compound.html#compound-element"><em>Element</em></a> in input set
(ties go to random element)</td>
<td><a class="reference internal" href="../data/compound.html#compound-set"><em>Set</em></a></td>
</tr>
<tr class="row-even"><td>name</td>
<td>NA</td>
<td>Report an ordered list of <a class="reference internal" href="../data/base.html#base-name"><em>Names</em></a> in the input set</td>
<td><a class="reference internal" href="../data/compound.html#compound-array"><em>Array</em></a></td>
</tr>
<tr class="row-odd"><td>name-uniq</td>
<td>NA</td>
<td>Report the unique <a class="reference internal" href="../data/base.html#base-name"><em>Name</em></a> values in the input set</td>
<td><a class="reference internal" href="../data/compound.html#compound-array"><em>Array</em></a></td>
</tr>
<tr class="row-even"><td>range</td>
<td>NA</td>
<td>Report all <a class="reference internal" href="../data/base.html#base-range"><em>Ranges</em></a>
of <a class="reference internal" href="../data/compound.html#compound-element"><em>Elements</em></a>
in input set</td>
<td><a class="reference internal" href="../data/compound.html#compound-array"><em>Array</em></a></td>
</tr>
<tr class="row-odd"><td>size</td>
<td>NA</td>
<td>Report sizes of each <a class="reference internal" href="../data/compound.html#compound-element"><em>Element</em></a> in input set</td>
<td><a class="reference internal" href="../data/compound.html#compound-array"><em>Array</em></a></td>
</tr>
<tr class="row-even"><td>stdev</td>
<td>NA</td>
<td>Report standard deviation of
<a class="reference internal" href="../data/base.html#base-score"><em>Scores</em></a> in input
set</td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
<tr class="row-odd"><td>sum</td>
<td>NA</td>
<td>Report sum of <a class="reference internal" href="../data/base.html#base-score"><em>Scores</em></a> in input set</td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
<tr class="row-even"><td>tmean</td>
<td><em>low</em>, <em>high</em></td>
<td>Report arithmetic mean, removing
outliers as defined by the fractions
<em>low</em> and <em>high</em> (0 &lt;= <em>low</em> &lt;= 1,
0 &lt;= <em>high</em> &lt;= 1, <em>low</em> + <em>high</em> &lt;=
1)</td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
<tr class="row-odd"><td>variance</td>
<td>NA</td>
<td>Report variance of <a class="reference internal" href="../data/base.html#base-score"><em>Scores</em></a> in input set</td>
<td><a class="reference internal" href="../data/base.html#base-score"><em>Score</em></a></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Map</a><ul>
<li><a class="reference internal" href="#element-set-onto-element-set">Element set onto element set</a></li>
<li><a class="reference internal" href="#element-set-onto-interaction-set">Element set onto interaction set</a></li>
<li><a class="reference internal" href="#summary-report">Summary report</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="interaction.html"
                        title="previous chapter">Interaction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../glossary.html"
                        title="next chapter">Glossary</a></p>
<div class="sourcelink">
  <a href="../_sources/operations/map.txt" rel="nofollow">
    Show page source
  </a>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="interaction.html" title="Previous document">Interaction</a>
        </li>
        <li>
          <a href="../glossary.html" title="Next document">Glossary</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Home</a></li>
      <li>
        <a href="index.html">Operations</a>
      </li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2015, Alex Reynolds.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a>
      1.3b2
        with the <a href="http://github.com/irskep/sphinx-better-theme">
          better</a> theme.

  </footer>

  
  </body>
</html>